<script setup>
import { inject, ref, watch } from 'vue';
import { storeToRefs } from 'pinia';
import { usePlayStore } from '../store/playStore';
import { useSettingStore } from '../store/settingStore';
import SearchBar from '../components/SearchBar.vue';
import Navigator from '../components/Navigator.vue';
import EventBus from '../../common/EventBus';
import { useAppCommonStore } from '../store/appCommonStore';



const { visitThemes, visitUserHome, visitSetting } = inject('appRoute')

const { setLayoutIndex } = useSettingStore()
const { isRadioModeShortcutEnable } = storeToRefs(useSettingStore())
const { isRadioMode } = storeToRefs(useAppCommonStore())

const switchToSimpleLayout = () => {
    setLayoutIndex(2) //TODO
}

const toggleRadioMode = () => {
    EventBus.emit("toggleRadioMode")
}
</script>

<template>
    <div class="classic-main-top">
        <Navigator></Navigator>
        <SearchBar></SearchBar>
        <div class="action">
            <div id="radio-btn" @click="toggleRadioMode" v-show="isRadioModeShortcutEnable">
                <svg v-show="!isRadioMode" width="19" height="19" viewBox="0 0 938.74 981.44"
                    xmlns="http://www.w3.org/2000/svg">
                    <g id="Layer_2" data-name="Layer 2">
                        <g id="Layer_1-2" data-name="Layer 1">
                            <path
                                d="M476.39,0c2.69.76,5.42,1.39,8.05,2.3,15.69,5.44,24.48,16.58,26.93,32.87.36,2.44.54,4.9.74,6.72,19.41,3.54,38.41,6.19,57,10.54,89.44,21,167,63.79,231.84,128.85Q901.73,282.38,930.06,422.6a457.13,457.13,0,0,1,6.63,132.33c-8.77,95-42.81,180-103.22,253.84C764,893.67,675.19,947.59,568,971a458.45,458.45,0,0,1-135.68,8.85c-95.93-7.8-182.07-41.18-257.07-101.65C91,810.29,36.65,723.19,12,617.79A458.55,458.55,0,0,1,2.16,468.84q15.36-160.9,125-279.8a141.26,141.26,0,0,1,12.76-12.67c17.46-14.54,41.38-12.8,57.2,3.9,15.55,16.4,16,40.21.56,56.92C176.56,260,157.38,284.28,141.38,311c-32.6,54.38-52.25,113-55.11,176.48-6.33,140.25,46.51,253.29,159.28,337.22,48.09,35.8,102.71,57.63,162,66.42,115.51,17.11,219.49-10.11,309.52-85,69.49-57.79,113-132.06,129.3-221,21.42-116.61-4.79-222.22-79.63-314.37C708.56,199.1,633,154.88,542.32,136.88c-9.76-1.93-19.64-3.26-30-4.95-.12,2.3-.29,3.91-.29,5.53,0,25,.06,50-.09,75,0,3.76.71,5.37,4.89,6.08,64.95,10.95,120.84,39.69,166.78,86.88s73.68,103.63,81.87,169.15C782.08,607.09,712.18,731.52,591,785.29,543.07,806.54,492.8,814,440.65,809.23c-122.58-11.14-225.82-95.79-258.23-214.55-26.87-98.47-8.66-188.69,56-268.56,7.1-8.77,15.29-16.75,23.6-24.42,17.27-16,41.35-15.18,57.95,1.36,16.29,16.24,16.87,40.17,1.78,57.75-10.62,12.37-21.91,24.37-31,37.83-64.85,96.2-35.88,231.45,62.36,293.25,81.32,51.16,186.61,43.78,257.88-19.28,50.35-44.53,74-101.58,71.36-168.5C679.45,431.33,646,374.85,586,334c-21.68-14.78-45.68-24.54-71.23-30.47-.63-.15-1.29-.2-2.72-.4v5c0,26.67.06,53.33-.07,80,0,3.33.9,4.87,4.17,6.11,54.13,20.41,86.3,72.77,80.48,130.68-6.08,60.45-49,105.34-108.77,113.87-68.74,9.81-130-33.16-144-100.95-12.52-60.81,19.74-120.7,77.31-143,4.64-1.79,5.64-4.1,5.64-8.66q-.18-169.76-.05-339.53a68.62,68.62,0,0,1,1.15-14.41C431.67,15,442.41,4.62,459.68,1a19.65,19.65,0,0,0,2.71-1ZM426.58,511.42c-.47,25.28,16.56,42.86,42.07,43.44,25.24.57,42.93-16.47,43.55-42,.61-25.27-16.39-43-41.82-43.65S427.06,485.74,426.58,511.42Z" />
                        </g>
                    </g>
                </svg>
                <svg v-show="isRadioMode" width="19" height="20" viewBox="0 0 944.3 696.52"
                    xmlns="http://www.w3.org/2000/svg">
                    <g id="Layer_2" data-name="Layer 2">
                        <g id="Layer_1-2" data-name="Layer 1">
                            <path
                                d="M708.31,372.39v-8.34q0-156,0-311.93c0-25.37,16.52-45.95,40.82-50.95a44.53,44.53,0,0,1,8.93-.86c45.49-.06,91-.33,136.47.06,27.7.23,48.24,20.57,49.69,48C945.75,77,923,100,892.74,100.2c-26,.2-52,0-78,0h-6.44v6.9c0,141.63.32,283.27-.22,424.9-.14,38.73-14.05,73.31-38.94,103-36.08,43.09-82.64,63.69-138.6,61.24-77-3.37-141.93-59.23-158-134.59-16.91-79.43,26.49-160.86,101.88-191.25q65-26.21,129.76.45C705.42,371.43,706.66,371.8,708.31,372.39Zm-69.88,224.4c37.07.85,70.26-30.84,70-70.11-.26-37.75-32.14-69.39-69.9-69.37-37.42,0-69.8,31.56-69.73,70C568.85,564.54,600,597.35,638.43,596.79Z" />
                            <path
                                d="M304.77.24q126,0,251.94,0c23.65,0,42.74,12.63,49.49,32.56,11.72,34.57-11.38,67.1-48.45,67.35-53,.35-106,.09-158.95.09q-172.2,0-344.41,0C42.76,100.3,31.93,98,22.2,91.4,4.59,79.46-2.15,62.24,1,42,4.37,20.61,17.81,6.63,39,1.85,48.29-.25,58.21.1,67.84.08Q186.31-.1,304.77,0Z" />
                            <path
                                d="M304.75,313.65q-126.23,0-252.45,0C24,313.61,4.11,296.1.48,268.34c-3.67-28.15,19.64-54.3,49.43-54.6,37.16-.37,74.32-.09,111.47-.09q198.21,0,396.41,0c27.69,0,48.68,18.82,51.37,45.83,2.81,28.19-19.71,53.72-48.48,54-40.15.39-80.31.14-120.47.14Q372.49,313.67,304.75,313.65Z" />
                            <path
                                d="M213.26,427.24c53.32,0,106.64.12,160-.07,17.11-.06,31.79,5.55,42.08,19.05,12.19,16,14.82,34.08,5.74,52.63-9.55,19.51-26.13,28.28-47.37,28.34-55.32.16-110.64.06-166,.06q-77.47,0-155,0c-19.57,0-35.63-7.47-45.64-24.61-19.34-33.09,2.91-74.14,41.2-75.06,40.63-1,81.3-.28,122-.31Z" />
                        </g>
                    </g>
                </svg>
            </div>
            <div id="theme-btn" @click="visitThemes">
                <svg width="19" height="19" viewBox="0 0 940.66 926.15" xmlns="http://www.w3.org/2000/svg">
                    <g id="Layer_2" data-name="Layer 2">
                        <g id="Layer_1-2" data-name="Layer 1">
                            <path
                                d="M697.39,926.15H245.3a14.77,14.77,0,0,0-2.77-.86C190,919.2,153.12,877.8,153.12,824.84V547.51c-3-.55-5.23-1-7.52-1.4-36.41-6.3-72.85-12.4-109.21-19C14.07,523.11.15,506.26.13,483.52c-.1-99-.27-198,.09-297,.12-34.94,16-61.27,47.23-77.57,8.39-4.36,17.28-7.79,26-11.44Q183.53,51.59,293.6,5.66c21.22-8.91,39.62-5.77,56.55,9.91C383.38,46.36,417,76.76,450.41,107.31c6.95,6.35,13.95,12.66,20.93,19l4.16-3.78,120.8-110c14.74-13.43,31.27-16,49.46-8,11,4.82,21.9,9.74,32.84,14.63,70.76,31.66,141.65,63,212.23,95.09,31.49,14.3,49.13,39.56,49.37,74.25.71,98.49.41,197,.35,295.47,0,22.47-14,39.1-36.08,43.19-24.55,4.54-49.18,8.64-73.78,12.93l-41.12,7.12c0,2.14,0,3.95,0,5.76.11,13.49.34,27,.32,40.48q-.1,117.24-.32,234.47c-.07,41-27.26,79.11-66.15,92.07C715,922.8,706.08,924.13,697.39,926.15ZM853.58,447.77v-5.88q0-121.75.14-243.52c0-4.72-1.71-6.59-5.67-8.35Q743.41,143.48,638.89,96.59c-2.86-1.28-4.56-1.15-6.89,1q-26.61,24.59-53.46,48.91c-25.6,23.35-51.13,46.77-76.85,70C490.73,226.38,477.91,231,463,228c-10-2-17.92-7.62-25.29-14.35q-63.44-58-126.93-115.94c-2.46-2.24-4.38-3.12-7.81-1.68Q197.31,140.24,91.49,184.09c-3.58,1.48-4.47,3.39-4.46,7q.15,125.51.08,251v5.48l66,11.49v-6.36c0-45-.07-90,0-135,0-21.06,15.76-39.07,36.64-42.46,20.31-3.29,40.76,8.44,47,27.95a75.22,75.22,0,0,1,3.2,22.6q.27,247.77.14,495.54a51.79,51.79,0,0,0,.21,6.48c.71,5.62,3.79,9.11,9.31,10.35a34.18,34.18,0,0,0,7.42.7q214.29.06,428.58,0a34.47,34.47,0,0,0,5-.24c8.14-1.19,11.59-5.11,11.89-13.37.07-1.83,0-3.67,0-5.5q.16-250.51.34-501c0-24.77,18.7-43.72,43-43.74,24.76,0,43.59,18.77,43.68,43.66q.2,58.74.34,117.49c0,7.3,0,14.59,0,22.49Z" />
                        </g>
                    </g>
                </svg>
            </div>
            <div id="userhome-btn" @click="visitUserHome">
                <svg width="21" height="20" viewBox="0 0 938.47 938.5" xmlns="http://www.w3.org/2000/svg">
                    <g id="Layer_2" data-name="Layer 2">
                        <g id="Layer_1-2" data-name="Layer 1">
                            <path
                                d="M0,469C.33,209.53,210.36-.32,469.38,0,729.05.32,939.22,210.78,938.47,469.76c-.76,259.7-211.12,469.66-469.63,468.74C208.87,937.57-.33,728.06,0,469Zm453.81,128,.12-.34-1.95-.2c-53.39-5.09-94.44-29.95-122-76.3-14.75-24.84-23-52-27.21-80.35-4.62-31.1-6.87-62.34-.49-93.46,10.07-49.16,36-87.34,80.26-111.88,32.13-17.8,67-23.53,103.32-20.28,46.06,4.12,84.22,23.72,113.49,59.63,24.9,30.54,37.7,66,39.88,105.16,2.3,41.55-2.47,82.21-19,120.79-19.26,44.86-51.57,75.78-98.75,90.18a171.59,171.59,0,0,1-18,4.28c-6,1.14-12.07,1.77-19.36,2.8,2.76.19,4.26.35,5.75.38,39.17.82,78.23,3.08,117,8.94,33.49,5.07,66.42,12.41,97.94,25.1,27.78,11.19,53.28,25.93,73.53,48.57,2.16,2.43,4.24,4.93,6.42,7.46,100.84-141.58,96.84-361.06-57.33-502.35C576.61,46.82,340.65,52.88,196.73,198.77,51.56,345.94,60.23,558.41,153.79,687.36c2.07-2.44,4.06-4.88,6.15-7.22,23.12-25.8,52.64-41.45,84.68-52.86,50.51-18,103.12-24.68,156.28-28C418.51,598.18,436.17,597.7,453.81,596.94Zm15.45,85.56c-55,0-99.89,3.54-143.71,11.75C299.3,699.17,273.61,706,250,719c-13.9,7.67-26.18,17.11-33.23,32-1.83,3.88-1.62,6.33,1.92,9.29,86,71.89,184.71,102.35,296.12,90,74.25-8.24,140.09-37.15,198-84.26,12.85-10.45,12.94-12.24,2.41-25.61-9-11.4-20.9-19-33.75-25.16-25-12-51.65-18.4-78.78-23C558.52,684.74,513.94,682.83,469.26,682.5ZM383.5,389.86c1,11.78,1.58,23.6,3,35.32a178.07,178.07,0,0,0,4.84,24c10.64,39.94,33.24,60,72.16,62.46,39.11,2.43,67.94-13.22,81.51-52.5,9.63-27.85,11.93-56.79,7.84-85.82-3.8-26.92-16.6-49.06-40.58-63.43C495,299.51,476.06,297,456.38,299.32c-31.89,3.81-55.18,19.38-66.8,50.18C384.68,362.46,383.45,376,383.5,389.86Z" />
                        </g>
                    </g>
                </svg>
            </div>
            <div id="setting-btn" @click="visitSetting">
                <svg width="21" height="20" viewBox="0 0 19.53 18" xmlns="http://www.w3.org/2000/svg">
                    <g id="Layer_2" data-name="Layer 2">
                        <g id="Layer_1-2" data-name="Layer 1">
                            <path class="cls-1"
                                d="M.32,10.34a3,3,0,0,1,0-2.68l3-6A3,3,0,0,1,6,0h7.53a3,3,0,0,1,2.68,1.66l3,6a3,3,0,0,1,0,2.68l-3,6A3,3,0,0,1,13.53,18H6a3,3,0,0,1-2.68-1.66ZM2.11,8.55a1,1,0,0,0,0,.9l3,6A1,1,0,0,0,6,16h7.53a1,1,0,0,0,.89-.55l3-6a1,1,0,0,0,0-.9l-3-6A1,1,0,0,0,13.53,2H6a1,1,0,0,0-.89.55ZM7.76,9a2,2,0,1,0,2-2A2,2,0,0,0,7.76,9Zm2,4a4,4,0,1,1,4-4A4,4,0,0,1,9.76,13Z" />
                        </g>
                    </g>
                </svg>
            </div>
            <div id="switch-layout-btn" @click="switchToSimpleLayout">
                <svg width="20" height="18" viewBox="0 0 1019 1019" xmlns="http://www.w3.org/2000/svg">
                    <g id="Layer_2" data-name="Layer 2">
                        <g id="Layer_1-2" data-name="Layer 1">
                            <path
                                d="M0,841V50a65,65,0,0,0,2.75-6.86C8.72,22.15,22.41,9,43.22,3c3-.86,5.85-2,8.78-3H837a28.45,28.45,0,0,0,4.46,1.9c31.14,7.47,47.71,28.49,47.71,60.65V447.16h6.12c21,0,42-.07,63,0,29.91.13,51.36,17,58.66,45.87.52,2,1.37,4,2.06,5.95V968a32.14,32.14,0,0,0-2.06,4.91c-5.41,22.53-19.19,37-41.49,43.25-4.41,1.23-9,1.91-13.45,2.84H503a24.12,24.12,0,0,0-3.77-.86c-31.82-2.43-54.36-26.64-54.39-58.5,0-21.49,0-43,0-64.46,0-1.75-.14-3.5-.24-5.67h-7.5l-377.22-.35c-28.4,0-48.4-14.83-56.88-41.95A46.47,46.47,0,0,0,0,841Zm447-71V506c0-34.45,20.39-57.11,54.53-60,10.76-.93,21.62-.92,32.44-.93q114.74-.1,229.48,0h6.06V118.23H118.2V770ZM564.55,565V900.68H900.66V565Z" />
                        </g>
                    </g>
                </svg>
            </div>
        </div>
    </div>
</template>

<style>
.classic-main-top {
    display: flex;
    flex-direction: row;
    align-items: center;
    height: 60px;
    -webkit-app-region: drag;
    position: relative;
    padding-left: 33px;
}

.classic-main-top .navigator {
    margin-top: 3px;
    margin-right: 15px;
}

.classic-main-top .search-bar .keyword {
    width: 139px;
}

.classic-main-top .action {
    position: absolute;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    right: 33px;
}

.classic-main-top svg {
    fill: var(--svg-color);
    cursor: pointer;
    -webkit-app-region: none;
    background-color: transparent;
}

.classic-main-top svg:hover {
    fill: var(--hl-color);
    fill: var(--svg-hover-color);
}

.classic-main-top #switch-layout-btn svg,
.classic-main-top #radio-btn svg,
.classic-main-top #theme-btn svg,
.classic-main-top #userhome-btn svg,
.classic-main-top #setting-btn svg {
    margin-top: 4px;
}

.classic-main-top #radio-btn,
.classic-main-top #theme-btn,
.classic-main-top #userhome-btn,
.classic-main-top #setting-btn {
    margin-right: 15px;
}
</style>